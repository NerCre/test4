<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>命をツナゲル</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div id="app" class="app">
      <!-- Top bar: back & logout shown on non-login views -->
      <header id="topbar" class="topbar" aria-label="操作バー">
        <button id="btnBack" class="icon-btn" type="button" aria-label="戻る">
          <!-- Left arrow icon -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M15.5 5.5 9 12l6.5 6.5-1.4 1.4L6.2 12l7.9-7.9 1.4 1.4z" />
          </svg>
          <span>戻る</span>
        </button>
        <div id="topbarTitle" class="topbar-title" aria-hidden="true">
          命をツナゲル
        </div>
        <button id="btnLogout" class="icon-btn" type="button" aria-label="終了">
          <!-- Logout/restart icon -->
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path
              d="M17.65 6.35A7.95 7.95 0 0 0 12 4V1L7 6l5 5V7a6 6 0 1 1-6 6H4a8 8 0 1 0 13.65-6.65z"
            />
          </svg>
          <span>終了</span>
        </button>
      </header>

      <main class="main">
        <!-- Login view -->
        <section id="view-login" class="view active" aria-label="ログイン">
          <div class="hero">
            <div class="mascot">
              <img
                src="ツナゲルちゃん.png"
                alt="ツナゲルちゃんのキャラクター"
              />
            </div>
            <h1 class="app-title">命をツナゲル</h1>
            <p class="tagline">安全課が救命情報を迅速に提供するためのアプリです。</p>
          </div>

          <div class="login-forms">
            <div class="login-section">
              <h2>ユーザーログイン</h2>
              <div class="input-group">
                <label for="userPassword">パスワード</label>
                <input
                  id="userPassword"
                  type="password"
                  autocomplete="current-password"
                />
              </div>
              <button id="btnUserLogin" class="btn btn-primary" type="button">
                ログイン
              </button>
            </div>

            <div class="login-section">
              <h2>管理者ログイン</h2>
              <div class="input-group">
                <label for="adminId">ID</label>
                <input id="adminId" type="text" autocomplete="username" />
              </div>
              <div class="input-group">
                <label for="adminPassword">パスワード</label>
                <input
                  id="adminPassword"
                  type="password"
                  autocomplete="current-password"
                />
              </div>
              <button id="btnAdminLogin" class="btn btn-primary" type="button">
                ログイン
              </button>
            </div>
          </div>
        </section>

        <!-- Input view -->
        <section id="view-input" class="view" aria-label="照合入力">
          <h2>SMSを貼り付けて照合</h2>
          <div class="input-group">
            <label for="smsInput">SMS本文</label>
            <textarea
              id="smsInput"
              rows="4"
              placeholder="ここにSMS内容を貼り付けてください"
            ></textarea>
          </div>
          <div class="input-group">
            <label for="empId">職員ID</label>
            <input id="empId" type="text" placeholder="IDを入力してください" />
          </div>
          <button id="btnMatch" class="btn btn-primary" type="button">
            照合する
          </button>
          <p class="small muted">
            ※ SMS本文から自動でIDを抽出しますが、手動で修正できます。
          </p>
        </section>

        <!-- Result view -->
        <section id="view-result" class="view" aria-label="職員情報">
          <h2>職員情報</h2>
          <div id="resultCard" class="result-card"></div>
          <button id="btnResultBack" class="btn btn-secondary" type="button">
            戻る
          </button>
        </section>

        <!-- Admin view -->
        <section id="view-admin" class="view" aria-label="マスタ設定">
          <h2>マスタデータ設定</h2>
          <div class="admin-actions">
            <button id="btnAddStaff" class="btn btn-primary" type="button">
              新規追加
            </button>
            <button id="btnExport" class="btn btn-secondary" type="button">
              エクスポート
            </button>
            <label for="importFile" class="btn btn-secondary">
              インポート
              <input type="file" id="importFile" accept=".json" hidden />
            </label>
          </div>
          <table id="staffTable" class="staff-table">
            <thead>
              <tr>
                <th style="width: 25%">ID</th>
                <th style="width: 45%">氏名</th>
                <th style="width: 30%">操作</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <hr />
          <h3>パスワード設定</h3>
          <div class="input-group">
            <label for="newUserPassword">利用者パスワード</label>
            <input id="newUserPassword" type="password" />
          </div>
          <button
            id="btnSetUserPassword"
            class="btn btn-primary"
            type="button"
          >
            更新
          </button>
          <div class="input-group">
            <label for="newAdminId">管理者ID</label>
            <input id="newAdminId" type="text" />
          </div>
          <div class="input-group">
            <label for="newAdminPassword">管理者パスワード</label>
            <input id="newAdminPassword" type="password" />
          </div>
          <button
            id="btnSetAdminCredentials"
            class="btn btn-primary"
            type="button"
          >
            更新
          </button>

          <!-- Modal for staff add/edit -->
          <div id="staffFormContainer" class="modal hidden">
            <div class="modal-content">
              <h3 id="staffFormTitle">職員情報</h3>
              <div class="input-group">
                <label for="staffId">ID</label>
                <input id="staffId" type="text" />
              </div>
              <div class="input-group">
                <label for="staffName">氏名</label>
                <input id="staffName" type="text" />
              </div>
              <div class="input-group">
                <label for="staffBlood">血液型</label>
                <input id="staffBlood" type="text" />
              </div>
              <div class="input-group">
                <label for="staffHistory">既往歴（カンマ区切り）</label>
                <input id="staffHistory" type="text" />
              </div>
              <div class="input-group">
                <label for="staffMeds">薬剤情報（カンマ区切り）</label>
                <input id="staffMeds" type="text" />
              </div>
              <div class="input-group">
                <label for="staffAllergy">アレルギー（カンマ区切り）</label>
                <input id="staffAllergy" type="text" />
              </div>
              <div class="input-group">
                <label for="staffDoctor">かかりつけ医</label>
                <input id="staffDoctor" type="text" />
              </div>
              <div class="input-group">
                <label for="staffContactRel">緊急連絡先（続柄）</label>
                <input id="staffContactRel" type="text" />
              </div>
              <div class="input-group">
                <label for="staffContactTel">緊急連絡先（電話番号）</label>
                <input id="staffContactTel" type="text" />
              </div>
              <div class="modal-actions">
                <button id="btnSaveStaff" class="btn btn-primary" type="button">
                  保存
                </button>
                <button id="btnCancelStaff" class="btn btn-secondary" type="button">
                  キャンセル
                </button>
              </div>
            </div>
          </div>
        </section>
      </main>
      <div id="toast" class="toast"></div>
    </div>
    <script src="script.js"></script>
  </body>
</html>